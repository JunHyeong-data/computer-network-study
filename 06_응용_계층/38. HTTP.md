# HTTP

**HTTP**는 사용자와 밀접하게 맞닿아 있는 프로토콜로, 오늘날 웹의 핵심 기반입니다.  
HTTP는 다음과 같은 네 가지 주요 특성을 갖습니다:
1. **요청-응답 기반**
2. **미디어 독립적**
3. **상태 비유지(stateless)**
4. **지속 연결 지원**

## HTTP의 특성

### 1. 요청-응답 기반 프로토콜
- HTTP는 **클라이언트-서버 구조**에 기반하여 동작합니다.
- 클라이언트가 **요청(request)**을 보내고, 서버가 **응답(response)**을 반환합니다.

### 2. 미디어 독립적 프로토콜
- HTTP는 자원의 **형식에 제한 없이** 주고받을 수 있는 **인터페이스** 역할을 합니다.
- HTML, PNG, JPEG, JSON, XML, PDF 등 다양한 자원을 주고받을 수 있습니다.
- 자원의 종류는 **미디어 타입(Media Type)** 또는 **MIME 타입**으로 구분합니다.

#### 미디어 타입 형식
- `타입/서브타입` 구조로 구성됨.
- 예시:
  - `text/html` → HTML 문서
  - `image/png` → PNG 이미지
  - `application/json` → JSON 데이터

| 타입          | 설명                        | 서브타입      | 설명                         |
|---------------|-----------------------------|----------------|------------------------------|
| `text`        | 텍스트 기반 데이터           | `html`         | HTML 문서                    |
| `image`       | 이미지 파일                 | `jpeg`, `png`  | JPEG 또는 PNG 이미지         |
| `application` | 응용 프로그램 관련 데이터    | `json`, `pdf`  | JSON 데이터, PDF 문서 등     |
| `video`       | 영상 파일                   | `mp4`          | MP4 영상                     |
| `audio`       | 오디오 파일                 | `mpeg`         | MPEG 오디오                  |
| `*/*`         | 모든 미디어 타입             | -              | 와일드카드(모든 타입 허용)   |

- **와일드카드(*)**는 여러 미디어 타입을 통칭할 때 사용 가능
- 미디어 타입에는 **매개변수**를 추가할 수 있음  
  예: `text/html; charset=UTF-8`

---

### 3. 스테이트리스 프로토콜 (Stateless Protocol)

HTTP는 **스테이트리스(stateless)** 프로토콜입니다.  
즉, 서버는 클라이언트의 이전 요청 상태를 **기억하지 않습니다**.

- **모든 요청은 독립적으로 처리됨**
  - 클라이언트가 같은 요청을 여러 번 보내면, 서버는 모두 **새로운 요청**으로 처리
  - 따라서 **같은 응답을 여러 번** 받을 수 있음

#### 왜 상태를 유지하지 않을까?

- 서버는 수많은 클라이언트와 동시에 통신함
- **모든 클라이언트의 상태 정보를 서버가 기억한다면 부하가 매우 큼**
- **특정 서버에 클라이언트가 종속되는 문제**가 발생할 수 있음
- 상태 비유지는 다음과 같은 장점이 있음:
  - ✅ **확장성(Scalability)**: 서버를 수평적으로 쉽게 추가 가능
  - ✅ **견고성(Robustness)**: 한 서버에 문제가 생겨도 다른 서버가 대체 가능

---

### 4. 지속 연결 (Persistent Connection)

HTTP/1.1부터 기본적으로 **지속 연결(persistent connection)**, 또는 **Keep-Alive**가 지원됩니다.

- 하나의 TCP 연결로 여러 HTTP 요청과 응답을 주고받을 수 있음
- **매 요청마다 TCP 연결을 새로 만들 필요가 없음**

#### 비교: 비지속 연결 vs 지속 연결

| 항목               | 비지속 연결 (Non-persistent) | 지속 연결 (Persistent)     |
|--------------------|------------------------------|-----------------------------|
| TCP 연결 수립       | 요청마다 새로 수립             | 한 번 수립하여 여러 요청 처리 |
| 속도                | 느림                         | 빠름                        |
| 네트워크 부하        | 큼                           | 적음                        |
| 현재 사용 여부       | 과거 사용                     | 현재 기본 사용 방식          |

- 지속 연결은 서버와의 **네트워크 효율을 높이고 응답 속도 개선**에 기여합니다.

---

**정리**:  
HTTP는 **요청-응답 기반**, **미디어 독립성**, **스테이트리스**, **지속 연결**이라는 4가지 특성을 가지고 있으며, 이러한 특성들은 HTTP의 확장성과 유연성을 높여 오늘날의 웹 환경에서 핵심적인 프로토콜로 자리잡게 만들었습니다.

## HTTP 메시지 구조

![HTTP 메시지 구조](https://github.com/user-attachments/assets/f88022f0-9809-4e6b-a0f6-3e92faafd24d)

HTTP 메시지는 크게 세 부분으로 구성됩니다:
- 시작 라인 (Start Line)
- 필드 라인 (Field Lines)
- 메시지 본문 (Message Body)

> 필드 라인은 없거나 여러 개 있을 수 있고, 메시지 본문은 없을 수도 있습니다.  
> 또한 **필드 라인과 메시지 본문 사이에는 빈 줄 하나**가 반드시 있어야 합니다.

---

### 시작 라인 (Start Line)

HTTP 메시지는 요청 메시지 또는 응답 메시지일 수 있으며, 이에 따라 시작 라인이 달라집니다.

#### 📌 요청 메시지의 시작 라인: **요청 라인 (Request Line)**

요청 라인의 형식은 다음과 같습니다:

![요청 라인 예시](https://github.com/user-attachments/assets/65be8468-16f7-45d9-9643-1f9fa4e712a3)

- **메서드(Method)**: 클라이언트가 수행하고자 하는 작업 (예: `GET`, `POST`, `PUT`, `DELETE`)
- **요청 대상(Request Target)**: 요청하는 자원 (예: URL의 경로 `/index.html`)
- **HTTP 버전**: 사용된 HTTP 버전 (예: `HTTP/1.1`)

#### 📌 응답 메시지의 시작 라인: **상태 라인 (Status Line)**

상태 라인의 형식은 다음과 같습니다:

![상태 라인 예시](https://github.com/user-attachments/assets/f483e55b-65d2-4acc-b644-e680ea2efdc0)

- **HTTP 버전**: 응답에 사용된 HTTP 버전
- **상태 코드(Status Code)**: 요청 결과를 나타내는 3자리 숫자
- **이유 구문(Reason Phrase)**: 상태 코드에 대한 간단한 설명

예시:
- `HTTP/1.1 200 OK`: 요청이 성공적으로 처리됨
- `HTTP/1.1 404 NOT FOUND`: 요청한 자원이 존재하지 않음

---

### 필드 라인 (Field Lines)

필드 라인은 **0개 이상의 HTTP 헤더**로 구성되며, 각 헤더는 다음과 같은 형식을 가집니다:

<헤더 이름>: <헤더 값>

> 예시:  
> `Content-Type: text/html`  
> `Content-Length: 348`

필드 라인은 시작 라인 다음에 오며, HTTP 통신에 필요한 **부가 정보(metadata)**를 담고 있습니다.  
이 때문에 **헤더 라인(Header Line)**이라고도 부릅니다.

---

### 메시지 본문 (Message Body)

필요한 경우에만 존재하며, 요청 또는 응답의 **실제 데이터**를 포함합니다.

예를 들어, POST 요청에서는 폼 데이터나 JSON 데이터가 메시지 본문에 포함됩니다.

![메시지 본문 예시](https://github.com/user-attachments/assets/12d832cb-e936-483b-b2d6-5b650315c2e1)

---

# HTTP 메서드(Method)

HTTP 메서드는 클라이언트가 서버에 요청할 작업의 종류를 정의합니다.  
대표적인 메서드는 다음과 같습니다:

---

## 1. GET

### 🔹 설명
- 서버의 **자원을 조회**할 때 사용됩니다.
- 데이터를 가져오기만 하며, 서버의 상태나 데이터에 **영향을 주지 않습니다.**
- 요청에 본문이 없고, 필요한 정보는 **쿼리 파라미터**로 전달됩니다.

### 🔹 예시
```http
GET /users?id=123 HTTP/1.1
Host: example.com
```
📌 사용 예: 게시글 목록 보기, 사용자 정보 요청 등

## 2. HEAD

### 🔹 설명
- GET과 동일하지만, 본문(body)을 반환하지 않습니다.
- 주로 헤더 정보만 확인하고 싶을 때 사용됩니다 (예: 파일 크기, 마지막 수정일 등).

### 🔹 예시
```http
HEAD /file.zip HTTP/1.1
Host: example.com
```
📌 사용 예: 파일 다운로드 전에 용량 확인

## 3.POST

### 🔹 설명
- 서버에 새로운 데이터를 생성하거나 제출할 때 사용됩니다.
- 요청 본문에 데이터를 포함하여 서버에 전송합니다.
- 서버의 상태나 데이터가 변경됩니다.

### 🔹 예시
```http
POST /users HTTP/1.1
Host: example.com
Content-Type: application/json

{
  "name": "준형",
  "email": "jun@example.com"
}
```
📌 사용 예: 회원가입, 댓글 작성, 로그인 등

## 4.PUT

### 🔹 설명
- 서버에 자원을 생성하거나 전체를 수정할 때 사용됩니다.
- 요청 본문에 포함된 내용으로 자원을 전체 대체합니다.
- 같은 URL로 여러 번 요청해도 같은 결과가 보장됨 (멱등성 있음).

### 🔹 예시
```http
PUT /users/123 HTTP/1.1
Host: example.com
Content-Type: application/json

{
  "name": "준형",
  "email": "new_jun@example.com"
}
```
📌 사용 예: 사용자 정보 전체 변경

## 5. PATCH

### 🔹 설명
- 자원의 일부만 수정할 때 사용됩니다.
- PUT과 달리 전체를 대체하지 않고, 주어진 값만 갱신합니다.
- 부분 수정이 목적이며, 서버의 상태에 변화를 일으킵니다.

### 🔹 예시
```http
PATCH /users/123 HTTP/1.1
Host: example.com
Content-Type: application/json

{
  "email": "patched_jun@example.com"
}
```
📌 사용 예: 이메일 주소만 변경, 비밀번호만 변경 등

## 6. DELETE

### 🔹 설명
- 특정 자원을 삭제할 때 사용됩니다.
- 요청이 성공하면 해당 자원은 서버에서 제거됩니다.
- 일반적으로 요청 본문은 사용하지 않습니다.

### 🔹 예시
```http
DELETE /users/123 HTTP/1.1
Host: example.com
```
📌 사용 예: 회원 탈퇴, 게시글 삭제 등

## 요약
| HTTP 메서드 | 설명 |
| ---------- | ---------- |
| GET | 자원을 습득하기 위한 메서드 |
| HEAD | GET과 동일하나, 헤더만을 응답받는 메서드 |
| POST | 서버로 하여금 특정 작업을 처리하게끔 하는 메서드 |
| PUT | 자원을 대체하기 위한 메서드 |
| PATCH | 자원에 대한 부분적 수정을 위한 메서드 |
| DELETE | 자원을 삭제하기 위한 메서드 |
| CONNECT | 자원에 대한 양방향 연결을 시작하는 메서드 |
| OPTIONS | 사용 가능한 메서드 등 통신 옵션을 확인하는 메서드 |
| TRACE | 자원에 대한 루프백 테스트를 수행하는 메서드 |

# HTTP 상태 코드

상태 코드의 종류는 200, 201, 304, 404, 505 등 다양한데, 백의 자리 수를 기준으로 유형을 구분할 수 있습니다. 다음은 상태 코드별 유형과 설명을 정리한 표입니다.

| 상태 코드 | 설명 |
| --------- | --------- |
| 100번대 (100~199) | 정보성 상태 코드 |
| 200번대 (200~299) | 성공 상태 코드 |
| 300번대 | 리다이렉션 상태 코드 |
| 400번대 | 클라이언트 에러 상태 코드 |
| 500번대 | 서버 에러 상태 코드 |

---

## ✅ 200번대: 성공 상태 코드

200번대 상태 코드는 **요청이 성공했음**을 의미합니다.

| 상태 코드 | 이유 구문 | 설명 |
| --------- | --------- | ----- |
| 200 | OK | 요청이 성공했음 |
| 201 | Created | 요청이 성공했으며, 새로운 자원이 생성되었음 |
| 202 | Accepted | 요청을 잘 받았으나, 아직 요청한 작업을 끝내지 않았음 |
| 204 | No Content | 요청이 성공했지만, 메시지 본문으로 표시할 데이터가 없음 |

> 예시:
> ```http
> HTTP/1.1 200 OK
> Content-Type: application/json
>
> {"message": "성공적으로 데이터를 불러왔습니다"}
> ```

---

## 🔁 300번대: 리다이렉션 상태 코드

300번대 상태 코드는 **리다이렉션**과 관련된 상태 코드입니다.

> 리다이렉션이란?  
> 요청을 완수하기 위해 **추가적인 조치**가 필요하다는 의미로,  
> 클라이언트가 요청한 자원이 **다른 위치**에 있을 때 사용됩니다.

### 영구적 리다이렉션

자원이 **완전히 새로운 위치**로 옮겨졌을 때 사용합니다.

| 상태 코드 | 이유 구문 | 설명 |
| --------- | --------- | ----- |
| 301 | Moved Permanently | 영구적 리다이렉션; 재요청 메서드 변경될 수 있음 |
| 308 | Permanent Redirect | 영구적 리다이렉션; 재요청 메서드 변경되지 않음 |

### 일시적 리다이렉션

자원의 위치가 **임시로 변경**되었을 때 사용합니다.

| 상태 코드 | 이유 구문 | 설명 |
| --------- | --------- | ----- |
| 302 | Found | 일시적 리다이렉션; 재요청 메서드 변경될 수 있음 |
| 303 | See Other | 일시적 리다이렉션; 재요청 메서드 GET으로 변경 |
| 307 | Temporary Redirect | 일시적 리다이렉션; 재요청 메서드 변경되지 않음 |

> 예시:
> ```http
> HTTP/1.1 301 Moved Permanently
> Location: https://new.example.com
> ```

---

## ❌ 400번대: 클라이언트 에러 상태 코드

클라이언트의 요청에 **문제가 있는 경우**에 발생하는 상태 코드입니다.

| 상태 코드 | 이유 구문 | 설명 |
| --------- | --------- | ----- |
| 400 | Bad Request | 클라이언트의 요청이 잘못되었음 |
| 401 | Unauthorized | 요청한 자원에 대한 유효한 인증이 없음 |
| 403 | Forbidden | 요청이 서버에 의해 거부됨 |
| 404 | Not Found | 요청한 자원을 찾을 수 없음 |
| 405 | Method Not Allowed | 요청한 메서드를 지원하지 않음 |

> 예시:
> ```http
> HTTP/1.1 404 Not Found
> Content-Type: text/html
>
> <h1>404 Page Not Found</h1>
> ```

---

## 💥 500번대: 서버 에러 상태 코드

서버가 **요청을 정상적으로 처리하지 못한 경우** 발생하는 상태 코드입니다.

| 상태 코드 | 이유 구문 | 설명 |
| --------- | --------- | ----- |
| 500 | Internal Server Error | 서버 내부 오류로 요청을 처리할 수 없음 |
| 502 | Bad Gateway | 중간 서버의 통신 오류 |
| 503 | Service Unavailable | 서버가 일시적으로 사용 불가능함 |

> 예시:
> ```http
> HTTP/1.1 503 Service Unavailable
> Retry-After: 120
> ```

---


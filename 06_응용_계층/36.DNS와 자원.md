# DNS와 자원

서버와 클라이언트는 **메시지를 주고받고자 하는 대상**과 **송신하고자 하는 정보**를 식별할 수 있어야 합니다.

- 메시지 대상 식별: **IP 주소** 또는 **도메인 네임**
- 정보 식별: **URL(위치 기반)**, **URN(이름 기반)**

---

## 도메인 네임과 네임 서버

일반적으로 사용자는 IP 주소보다 **도메인 네임**을 사용해 상대 호스트를 식별합니다.

- 도메인 네임: 문자열 형태의 호스트 정보  
  예) `www.example.com`, `developers.naver.com`

도메인 네임과 IP 주소는 **네임 서버(Name Server)**에서 관리됩니다.  
이러한 네임 서버를 **DNS 서버(Domain Name System Server)**라고 부릅니다.

- 도메인 네임 : IP 주소 = **전화번호부**처럼 관리됨
- 도메인 네임의 장점:
  - 사람이 **기억하기 쉬움**
  - IP 주소가 바뀌더라도 도메인 네임만 다시 연결해주면 됨

---

## 도메인 네임 구조

도메인 네임은 `.`(점)을 기준으로 **계층적으로 분류**됩니다.

![도메인 구조 이미지](https://github.com/user-attachments/assets/d31416e1-9aca-412e-9511-92f7040f9216)

### 계층 구조 예시: `www.example.com.`

- `.` (루트 도메인)
- `com` (최상위 도메인, TLD)
- `example` (2단계 도메인)
- `www` (3단계 도메인, 호스트 네임)

> 보통 3~5단계까지 사용 가능

- `www.example.com.`: **전체 주소 도메인 네임** (FQDN: Fully Qualified Domain Name)
- `www`: **호스트 네임**이라 부르기도 함

---

## DNS란?

- **Domain Name System (DNS)**: 계층적이고 분산된 도메인 네임 관리 체계
- 도메인 이름을 IP 주소로 **변환**해주는 시스템
- 동시에, 이러한 기능을 제공하는 **애플리케이션 계층 프로토콜**도 의미

> DNS는 인터넷의 전화번호부 역할을 하며, 도메인 이름으로 통신이 가능하도록 함


# 계층적 네임 서버

DNS 질의 과정에는 다양한 역할의 네임 서버들이 계층적으로 참여합니다. 주요 네임 서버 유형은 다음과 같습니다:

---

## 1. 로컬 네임 서버 (Local Name Server)

- 클라이언트와 **가장 가까운 위치**에 있는 네임 서버
- 일반적으로 **ISP에서 제공**하거나, **공개 DNS 서버(Google DNS, Cloudflare 등)**를 사용할 수 있음
- 클라이언트가 도메인 네임 질의 시 가장 먼저 질의하게 되는 대상

---

## 2. 루트 네임 서버 (Root Name Server)

- **최상위에 존재**하며, 루트 도메인(`.`)을 담당
- 로컬 네임 서버가 IP 주소를 모를 때 질의
- **TLD 네임 서버의 주소**를 반환해줌

![루트 네임 서버 도식](https://github.com/user-attachments/assets/d70a7558-b4a9-4b9b-add1-5c7d05100686)

---

## 3. TLD 네임 서버 (Top-Level Domain Name Server)

- `.com`, `.org`, `.kr` 등 **최상위 도메인(TLD)**을 담당
- 루트 네임 서버로부터 질의를 이어받아
- **다음 단계 네임 서버의 주소**를 반환

![TLD 네임 서버 도식](https://github.com/user-attachments/assets/82ae24bc-f1d1-487e-a39a-3768c39d07a5)

---

## 4. 책임 네임 서버 (Authoritative Name Server)

- **특정 도메인 영역**을 직접 관리
- 자신이 관리하는 도메인에 대한 질의에는 **직접 응답** 가능
- DNS 질의 체계에서 **마지막으로 질의되는** 서버

---

# DNS 질의 방식

## 재귀적 질의 (Recursive Query)

- 클라이언트 → 로컬 네임 서버에게 질의
- 로컬 네임 서버가 **직접 최종 응답을 받아와서** 클라이언트에게 전달
- 네임 서버들이 **직접 다른 서버에 질의**하며 결과를 역순으로 반환

![재귀적 질의 도식](https://github.com/user-attachments/assets/2021e677-9fbb-4f89-8050-42c0d3c3df29)

---

## 반복적 질의 (Iterative Query)

- 클라이언트 → 로컬 네임 서버에게 질의
- 로컬 네임 서버가 루트 서버에 질의하여 **다음 질의 대상만 받아옴**
- 이후 단계적으로 **TLD → 책임 네임 서버**에 질의
- 최종 응답을 받아 클라이언트에게 전달

![반복적 질의 도식](https://github.com/user-attachments/assets/e52ce0f9-bc4f-49eb-9cb6-5156a35b3f61)

---

# DNS 캐시 (DNS Cache)

- 네임 서버는 이전 질의 결과를 **임시 저장(cache)** 가능
- 같은 도메인에 대한 반복 질의 시 **빠르게 응답 가능**
- TTL(Time To Live): 캐시된 정보의 **유효 시간**
- TTL이 지나면 다시 DNS 질의 과정을 수행해야 함

> 전용 캐시 서버도 존재하며, 성능 향상을 위해 널리 사용됨

## 자원을 식별하는 URL
**자원**이란 네트워크 상의 메시지를 통해 주고받는 대상을 의미합니다. 이는 HTML 파일이 될수도 있고, 이미지나 동영상 파일이 될수도 있으며, 텍스트 파일이 될 수도 있습니다. 즉, 두 호스트가 네트워크를 통해 서로 정보를 주고받을 때, 송수신하는 대상이 바로 자원인 셈입니다.
ㅜ DNS와 자원

서버와 클라이언트는 **메시지를 주고받고자 하는 대상**과 **송신하고자 하는 정보**를 식별할 수 있어야 합니다.

- 메시지 대상 식별: **IP 주소** 또는 **도메인 네임**
- 정보 식별: **URL(위치 기반)**, **URN(이름 기반)**

---

## 도메인 네임과 네임 서버

일반적으로 사용자는 IP 주소보다 **도메인 네임**을 사용해 상대 호스트를 식별합니다.

- 도메인 네임: 문자열 형태의 호스트 정보  
  예) `www.example.com`, `developers.naver.com`

도메인 네임과 IP 주소는 **네임 서버(Name Server)**에서 관리됩니다.  
이러한 네임 서버를 **DNS 서버(Domain Name System Server)**라고 부릅니다.

- 도메인 네임 : IP 주소 = **전화번호부**처럼 관리됨
- 도메인 네임의 장점:
  - 사람이 **기억하기 쉬움**
  - IP 주소가 바뀌더라도 도메인 네임만 다시 연결해주면 됨

---

## 도메인 네임 구조

도메인 네임은 `.`(점)을 기준으로 **계층적으로 분류**됩니다.

![도메인 구조 이미지](https://github.com/user-attachments/assets/d31416e1-9aca-412e-9511-92f7040f9216)

### 계층 구조 예시: `www.example.com.`

- `.` (루트 도메인)
- `com` (최상위 도메인, TLD)
- `example` (2단계 도메인)
- `www` (3단계 도메인, 호스트 네임)

> 보통 3~5단계까지 사용 가능

- `www.example.com.`: **전체 주소 도메인 네임** (FQDN: Fully Qualified Domain Name)
- `www`: **호스트 네임**이라 부르기도 함

---

## DNS란?

- **Domain Name System (DNS)**: 계층적이고 분산된 도메인 네임 관리 체계
- 도메인 이름을 IP 주소로 **변환**해주는 시스템
- 동시에, 이러한 기능을 제공하는 **애플리케이션 계층 프로토콜**도 의미

> DNS는 인터넷의 전화번호부 역할을 하며, 도메인 이름으로 통신이 가능하도록 함


# 계층적 네임 서버

DNS 질의 과정에는 다양한 역할의 네임 서버들이 계층적으로 참여합니다. 주요 네임 서버 유형은 다음과 같습니다:

---

## 1. 로컬 네임 서버 (Local Name Server)

- 클라이언트와 **가장 가까운 위치**에 있는 네임 서버
- 일반적으로 **ISP에서 제공**하거나, **공개 DNS 서버(Google DNS, Cloudflare 등)**를 사용할 수 있음
- 클라이언트가 도메인 네임 질의 시 가장 먼저 질의하게 되는 대상

---

## 2. 루트 네임 서버 (Root Name Server)

- **최상위에 존재**하며, 루트 도메인(`.`)을 담당
- 로컬 네임 서버가 IP 주소를 모를 때 질의
- **TLD 네임 서버의 주소**를 반환해줌

![루트 네임 서버 도식](https://github.com/user-attachments/assets/d70a7558-b4a9-4b9b-add1-5c7d05100686)

---

## 3. TLD 네임 서버 (Top-Level Domain Name Server)

- `.com`, `.org`, `.kr` 등 **최상위 도메인(TLD)**을 담당
- 루트 네임 서버로부터 질의를 이어받아
- **다음 단계 네임 서버의 주소**를 반환

![TLD 네임 서버 도식](https://github.com/user-attachments/assets/82ae24bc-f1d1-487e-a39a-3768c39d07a5)

---

## 4. 책임 네임 서버 (Authoritative Name Server)

- **특정 도메인 영역**을 직접 관리
- 자신이 관리하는 도메인에 대한 질의에는 **직접 응답** 가능
- DNS 질의 체계에서 **마지막으로 질의되는** 서버

---

# DNS 질의 방식

## 재귀적 질의 (Recursive Query)

- 클라이언트 → 로컬 네임 서버에게 질의
- 로컬 네임 서버가 **직접 최종 응답을 받아와서** 클라이언트에게 전달
- 네임 서버들이 **직접 다른 서버에 질의**하며 결과를 역순으로 반환

![재귀적 질의 도식](https://github.com/user-attachments/assets/2021e677-9fbb-4f89-8050-42c0d3c3df29)

---

## 반복적 질의 (Iterative Query)

- 클라이언트 → 로컬 네임 서버에게 질의
- 로컬 네임 서버가 루트 서버에 질의하여 **다음 질의 대상만 받아옴**
- 이후 단계적으로 **TLD → 책임 네임 서버**에 질의
- 최종 응답을 받아 클라이언트에게 전달

![반복적 질의 도식](https://github.com/user-attachments/assets/e52ce0f9-bc4f-49eb-9cb6-5156a35b3f61)

---

# DNS 캐시 (DNS Cache)

- 네임 서버는 이전 질의 결과를 **임시 저장(cache)** 가능
- 같은 도메인에 대한 반복 질의 시 **빠르게 응답 가능**
- TTL(Time To Live): 캐시된 정보의 **유효 시간**
- TTL이 지나면 다시 DNS 질의 과정을 수행해야 함

> 전용 캐시 서버도 존재하며, 성능 향상을 위해 널리 사용됨

# 자원을 식별하는 URL

---

## 자원이란?

- **자원(Resource)**: 네트워크를 통해 주고받는 **정보의 대상**
  - 예: HTML 파일, 이미지, 동영상, 텍스트 등
- HTTP 기반 통신에서 자원은 주로 "**HTTP 요청 메시지의 대상**"을 의미함

---

## URI (Uniform Resource Identifier)

- 네트워크 상의 자원을 식별하는 **통합된 방식**
- URI는 크게 **두 가지 종류**로 나뉨:
  1. **URL (Uniform Resource Locator)**: 위치 기반 식별자
  2. **URN (Uniform Resource Name)**: 이름 기반 식별자

---

## URL (Uniform Resource Locator)

> 자원의 **위치**를 바탕으로 식별  
> 오늘날 대부분의 웹 서비스는 URL을 통해 자원을 식별함

### URL 구성 요소 예시
```
https://chat.openai.com/chat?user=jun#section1
```

1. **Scheme (스킴)**  
   - 통신 프로토콜 또는 자원 접근 방식  
   - 예: `http`, `https`, `ftp`, `mailto`, ...
   - ✅ 예시: `https`

2. **Authority (호스트 정보)**  
   - 도메인 네임 또는 IP 주소  
   - 예: `chat.openai.com`

3. **Path (경로)**  
   - 자원의 **서버 내 위치 경로**  
   - 예: `/chat`

4. **Query (쿼리 문자열)**  
   - 추가적인 요청 정보를 전달하는 문자열  
   - 형식: `key=value&key2=value2`  
   - 예: `?user=jun`

5. **Fragment (프래그먼트)**  
   - 문서 내 특정 위치(조각)를 가리킴  
   - 예: `#section1`

---

## URN (Uniform Resource Name)

> 자원의 **이름**을 기준으로 식별  
> 자원의 **위치에 의존하지 않음**

- 형식 예시:  
```
urn:isbn:9783161484100
```
→ 국제 표준 도서번호(ISBN)를 이용한 책 식별

- 장점:  
- 자원의 **위치가 변경되어도** 이름으로 지속적인 식별 가능

---

## 정리

| 구분 | URI | URL | URN |
|------|-----|-----|-----|
| 의미 | 자원 식별자 | 위치 기반 식별자 | 이름 기반 식별자 |
| 예시 | `https://example.com/page` | `https://example.com` | `urn:isbn:9783161484100` |
| 특징 | 상위 개념 | 자원의 위치 필요 | 자원의 고유 이름 사용 |

---

> ✅ **URI = URL 또는 URN**


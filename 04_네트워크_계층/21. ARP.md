# 🧭 ARP (Address Resolution Protocol)

네트워크에서 **IP 주소는 알지만 MAC 주소는 모르는 상황**에서 사용되는 프로토콜이 바로 **ARP**입니다.

ARP는 동일 네트워크 내에서 **IP 주소를 통해 MAC 주소를 알아내는 프로토콜**입니다.

---

## 🛠 왜 ARP가 필요한가요?

네트워크에서는 기본적으로 **IP 주소**를 사용하여 호스트를 식별합니다.  
하지만 실제 패킷 전송은 **MAC 주소**를 기반으로 이루어집니다.  
따라서, IP 주소만으로는 패킷을 전송할 수 없고 MAC 주소를 알아야 합니다.

---

## 🔁 ARP 동작 과정

![ARP 과정](https://github.com/user-attachments/assets/6beca43d-e39f-41fa-bc6a-933ec10db7c1)

### 1️⃣ ARP 요청 (Broadcast)

- A 호스트는 네트워크 내 모든 호스트에게 **ARP 요청 브로드캐스트**를 보냅니다.
- 내용:  
  > “10.0.0.2번 IP를 가진 너, 너의 MAC 주소가 뭐니?”

- 모든 호스트가 요청을 수신하지만, IP가 일치하지 않는 호스트는 무시합니다.

### 2️⃣ ARP 응답 (Unicast)

- IP가 10.0.0.2인 B 호스트는 자신의 **MAC 주소를 담은 ARP 응답**을 A에게 **유니캐스트**로 보냅니다.

### 3️⃣ ARP 테이블 갱신

- A는 B의 IP와 MAC 주소를 **ARP 테이블**에 저장합니다.
- 이후에는 같은 네트워크 내에서 B에게 직접 유니캐스트로 통신이 가능합니다.
- 이 테이블 정보는 일정 시간이 지나면 자동으로 삭제되거나 수동으로 삭제할 수 있습니다.

---

## 📦 ARP 테이블

| IP 주소     | MAC 주소               |
|-------------|------------------------|
| 10.0.0.2    | AA:BB:CC:DD:EE:FF      |
| ...         | ...                    |

> ARP 요청은 **브로드캐스트**, ARP 응답은 **유니캐스트**입니다.

---

## 🌐 서로 다른 네트워크일 경우?

ARP는 **같은 네트워크에서만** 사용됩니다.  
A와 B가 서로 다른 네트워크에 있다면, 중간에 **라우터**가 필요합니다.

### 예시:  
- A(10.0.0.1) → B(192.168.0.2)로 통신할 때

1. A는 **게이트웨이(라우터 A)의 MAC 주소**를 알기 위해 ARP 요청을 보냅니다.
2. 라우터 A는 ARP 응답으로 자신의 MAC 주소를 보냅니다.
3. A는 B로 가는 패킷을 **라우터 A에게** 보냅니다.
4. 라우터 A는 **라우터 B의 MAC 주소**를 알기 위해 ARP 요청을 보냅니다.
5. 라우터 B는 ARP 응답을 보냅니다.
6. 라우터 B는 다시 **호스트 B의 MAC 주소**를 모르므로 또다시 ARP 요청을 보냅니다.
7. B가 ARP 응답을 보내고, 비로소 최종 목적지인 B에게 패킷이 도달합니다.

---

## 🧾 정리

| 항목             | 설명 |
|------------------|------|
| 프로토콜 이름     | ARP (Address Resolution Protocol) |
| 역할              | IP 주소 → MAC 주소 변환 |
| 사용 범위         | 동일 네트워크 (브로드캐스트 범위 내) |
| 요청 방식         | 브로드캐스트 |
| 응답 방식         | 유니캐스트 |
| 저장              | ARP 테이블에 IP-MAC 매핑 저장 |

> ✅ ARP는 **같은 네트워크 내의 호스트 간 통신**을 위해 꼭 필요한 프로토콜입니다.

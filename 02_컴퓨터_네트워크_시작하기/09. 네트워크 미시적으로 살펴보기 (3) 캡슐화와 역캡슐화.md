# 📦 캡슐화와 역캡슐화

패킷은 송신 측에서 **캡슐화(encapsulation)** 과정을 거쳐 전송되고, 수신 측에서 **역캡슐화(decapsulation)** 과정을 통해 해석됩니다.  
이 과정은 택배 포장과 개봉 과정에 비유할 수 있습니다.

---

## 🔒 캡슐화 (Encapsulation)

> 송신자가 데이터를 전송할 때, **각 계층에서 헤더(및 트레일러)를 추가하며 하위 계층으로 내려보내는 과정**

- 상위 계층의 데이터는 하위 계층에선 **페이로드**로 간주됨
- 각 계층의 프로토콜은 고유한 **헤더**를 추가
- 데이터 링크 계층에서는 **트레일러**(오류 검출 등)도 추가될 수 있음

📌 비유: 상자 속에 또 다른 상자를 넣으며 포장하는 **택배 포장** 과정과 같음

![캡슐화](https://github.com/user-attachments/assets/445cc231-d5c6-4a7c-a377-7eeb5b173a52)

---

## 🔓 역캡슐화 (Decapsulation)

> 수신자가 데이터를 받을 때, **각 계층에서 헤더를 해석하고 제거하며 상위 계층으로 전달하는 과정**

- 수신 측에서는 하위 계층에서 상위 계층 방향으로 진행
- 각 계층은 헤더 정보를 기반으로 어떤 처리를 할지 결정

📌 비유: 택배를 받으면 겉 포장을 하나씩 벗기고 안의 물건을 꺼내는 과정

![역캡슐화](https://github.com/user-attachments/assets/8c19037f-fab6-4c0b-bf87-044139b08c3f)

---

## 📨 PDU (Protocol Data Unit)

> 각 계층에서 데이터를 주고받을 때 사용하는 **메시지 단위**

| OSI 계층           | PDU 이름            |
|--------------------|---------------------|
| 응용 계층           | 데이터 (Data)       |
| 표현 계층           | 데이터 (Data)       |
| 세션 계층           | 데이터 (Data)       |
| 전송 계층           | 세그먼트 / 데이터그램 |
| 네트워크 계층        | 패킷 (Packet)        |
| 데이터 링크 계층     | 프레임 (Frame)       |
| 물리 계층           | 비트 (Bits)         |

📝 참고:
- 상위 계층에서는 일반적으로 그냥 "데이터"라고 부름
- 하위 계층에서는 역할에 따라 명칭이 구체화됨

![PDU 계층 구조](https://github.com/user-attachments/assets/c5de2e83-7d8d-4a88-91ef-2ce914e49689)

---

## ✅ 요약

- **캡슐화**: 데이터 전송 시 각 계층에서 헤더/트레일러 추가
- **역캡슐화**: 데이터 수신 시 각 계층에서 헤더/트레일러 제거
- **PDU**: 각 계층에서 사용하는 데이터 단위

이제부터 데이터를 전송하는 모든 과정은 이 구조 속에서 이해하면 됩니다!

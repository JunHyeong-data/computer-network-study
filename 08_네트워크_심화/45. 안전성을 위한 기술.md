# 🔐 안정성을 위한 기술 – 암호화와 인증서

**암호화**는 원문 데이터를 알아볼 수 없는 형태로 바꾸는 과정입니다.  
**복호화**는 암호화된 데이터를 다시 원문으로 되돌리는 과정을 말합니다.  
암호화와 복호화는 **데이터 송수신 보안**뿐 아니라, **인증서 기반 검증**도 가능하게 합니다.

---

## 🔑 암호와 인증서

### 🧮 대칭 키 암호화 방식 vs 공개 키 암호화 방식

- **키(key)**:  
  - 일반적으로 무작위 문자열처럼 생긴 보안 정보  
  - 키와 원문 데이터를 **수학적 연산(암호화 알고리즘)**을 통해 암호문 생성  
  - 수신자는 해당 암호문을 복호화하여 원문을 복원함

---

### 🔁 대칭 키 암호화 (Symmetric Encryption)

- **하나의 키로 암호화와 복호화를 모두 수행**
- 송신자와 수신자가 **동일한 키를 공유**

> ![대칭 키 암호화](https://github.com/user-attachments/assets/cf6e9765-da98-4f48-9944-005b6341beb6)

#### ❗️ 문제점
- **키 전달**이 어려움  
- 키가 유출되면 통신 전체가 위험해짐

---

### 🔐 공개 키 암호화 (Asymmetric Encryption)

- **서로 다른 두 개의 키(공개 키, 개인 키)**를 사용  
  - 공개 키로 암호화  
  - 개인 키로 복호화  
- 또는 그 반대로도 가능

> ![공개 키 암호화](https://github.com/user-attachments/assets/f0a41608-c60d-4332-87ba-a624d35f4fbb)

- **공개 키**: 누구나 알 수 있음  
- **개인 키**: 본인만 알고 있어야 함

#### 🔐 보안성
- 한 키만으로는 다른 키를 유추할 수 없음  
  - 공개 키로는 개인 키를 알 수 없음  
  - 개인 키로도 공개 키를 알 수 없음

---

## ⚖️ 대칭 vs 공개 키 암호화 – 장단점 비교

| 항목 | 대칭 키 암호화 | 공개 키 암호화 |
|------|----------------|----------------|
| 키 수 | 1개 (공유 키) | 2개 (공개/개인 키) |
| 속도 | 빠름 | 느림 |
| 부하 | 낮음 | 높음 |
| 보안성 | 키 유출 위험 있음 | 키 유출에 강함 |
| 키 공유 | 직접 안전하게 전달 필요 | 안전하게 공유 가능 |

---

## 🧩 혼합 방식 – 하이브리드 암호화

실제 환경에서는 **두 방식의 장점**을 살리기 위해 **혼합 사용**하는 경우가 많습니다.

예시 흐름:

1. **공개 키**로 **대칭 키(세션 키)**를 암호화하여 안전하게 전달  
2. 수신자가 **개인 키**로 복호화하여 **세션 키 획득**  
3. 이후의 데이터 통신은 **세션 키**를 사용하여 대칭 키 방식으로 암호화/복호화

### 🗝️ 세션 키 (Session Key)

- 위처럼 **일시적으로 공유되는 대칭 키**
- 빠른 암호화/복호화 수행을 위해 사용됨

---

# 📜 인증서와 디지털 서명

## 🔐 인증서란?

- **인증서**는 어떤 정보를 **공식적으로 증명하는 전자 문서**입니다.
- 네트워크에서는 보통 **공개 키 인증서(Public Key Certificate)**를 의미합니다.
- 공개 키 인증서는 **공개 키**와 해당 키의 **유효성을 증명하는 정보**로 구성되어 있습니다.

예시:
- 클라이언트(사용자)의 컴퓨터가 웹 서버와 통신할 때, 서버는 공개 키를 전달합니다.
- 이 공개 키가 **신뢰할 수 있는 서버로부터 온 것인지 검증**하기 위해 인증서가 사용됩니다.

---

## 🏢 인증 기관 (CA, Certificate Authority)

- 인증서는 제3자인 **인증 기관(CA)**이 발급합니다.
- CA는 인증서의 **발급, 검증, 저장** 역할을 수행하는 **공신력 있는 기관**입니다.

대표적인 CA 예시:
- IdenTrust
- DigiCert
- GlobalSign

---

## 🖋️ 디지털 서명 (Digital Signature)

디지털 서명은 인증서의 위조 여부를 방지하고, 무결성을 보장하는 핵심 요소입니다.

**서명 생성 과정:**

1. 인증서의 내용을 **해시 함수**로 요약 (Hashing)
2. 해시 값(H) → **CA의 개인 키**로 암호화
3. 암호화된 해시 값 = 디지털 서명(Signature)
4. 인증서 + 서명값 → 클라이언트에게 전달

> ![디지털 서명 생성 과정](https://github.com/user-attachments/assets/28080b0d-4bcd-42b5-a15a-2e6fab1e7ff1)

---

## 🧾 디지털 서명 검증 과정

클라이언트는 받은 인증서가 위조되지 않았는지 다음과 같이 검증합니다:

1. 인증서 본문의 해시 값 H' 계산
2. CA의 **공개 키**로 서명값 복호화 → 원래 해시 값 H
3. H와 H'가 일치하면 인증서가 **위조되지 않음**을 확인

> ![디지털 서명 검증 과정](https://github.com/user-attachments/assets/6a42130a-ff80-4725-af99-c272144f4945)

---

# 🌐 HTTPS: SSL과 TLS

## 🔐 SSL과 TLS란?

- **SSL(Secure Sockets Layer)**과 **TLS(Transport Layer Security)**는  
  데이터 통신의 **보안(암호화 + 인증)**을 위한 프로토콜입니다.
- TLS는 SSL의 후속 버전으로, **TLS 1.3**이 현재 주로 사용됩니다.

---

## 📡 HTTPS의 의미

- **HTTPS (HTTP Secure)**는 HTTP 메시지를 SSL/TLS를 통해 **보안 통신**하는 프로토콜입니다.
- HTTP + TLS = HTTPS

---

## 🔄 HTTPS 통신 과정 (TLS 1.3 기준)

HTTPS는 다음과 같은 **3단계 절차**를 거쳐 보안 통신을 수행합니다.

### 1. TCP Three-Way Handshake

- 기본적인 TCP 연결 형성
- SYN → SYN-ACK → ACK

### 2. TLS Handshake

- 암호화에 필요한 키와 인증서를 교환하고 검증
- 클라이언트는 서버로부터 **공개 키 인증서**를 받고
  - 디지털 서명을 통해 인증서의 **위조 여부를 검증**
  - 서버의 공개 키로 **세션 키(대칭 키)**를 암호화하여 전달
- 서버는 개인 키로 세션 키 복호화

### 3. 암호화된 데이터 송수신

- 세션 키를 사용해 대칭 키 방식으로 실제 HTTP 메시지를 암호화
- 이후 모든 HTTP 요청/응답은 **암호화된 형태로 송수신**

---

## 📌 요약 흐름도

```text
[클라이언트] --- TCP 연결 --- [서버]
      ↓
 TLS 핸드셰이크 (공개키/인증서 교환, 세션 키 설정)
      ↓
 HTTP 요청/응답 암호화 (세션 키 기반)
```

---

## 🔒 핵심 개념 요약

| 개념 | 설명 |
|------|------|
| 공개 키 인증서 | 서버의 공개 키 + 서명 정보가 담긴 전자 문서 |
| 디지털 서명 | 인증서의 해시를 CA의 개인 키로 암호화한 값 |
| CA | 인증서를 발급하고 보증하는 제3자 기관 |
| SSL/TLS | 보안 통신을 위한 프로토콜 |
| HTTPS | HTTP + TLS 로 구성된 보안 통신 프로토콜 |
| 세션 키 | 실제 데이터 암호화에 사용하는 대칭 키 |

---

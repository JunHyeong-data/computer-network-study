# ICMP (Internet Control Message Protocol)

**ICMP**는 IP의 **신뢰할 수 없는 전송 특성**과 **비연결형 전송 특성**을 보완하기 위한 **네트워크 계층**의 프로토콜입니다.  
IP 패킷의 전송 과정에서 발생하는 문제를 진단하거나 네트워크 상태를 알려주는 **피드백 메시지**를 전달합니다.

---

## ICMP의 주요 기능

ICMP 메시지는 다음과 같은 두 가지 주요 목적을 가집니다:

1. **오류 보고(Error Reporting)**  
   - 전송 도중 발생한 문제 상황을 송신지에 알려줌
2. **네트워크 진단 및 정보 제공(Diagnostic Information)**  
   - 네트워크 상태를 파악할 수 있는 정보 제공

---

## ICMP 메시지 구조

- ICMP 메시지는 **타입(Type)**과 **코드(Code)**로 구성됩니다.
  - **Type 필드**: 메시지의 큰 분류 (예: 에러, 요청 등)
  - **Code 필드**: 세부적인 상황 설명

📌 이 정보는 **ICMP 패킷 헤더**에 포함됩니다.

---

## ICMP 메시지 예시

| 타입 이름 (타입 번호)     | 코드 번호 | 코드 설명                                |
|---------------------------|------------|--------------------------------------------|
| 에코 요청 (8)             | 0          | 에코 요청 (ping 요청)                      |
| 에코 응답 (0)             | 0          | 에코 요청에 대한 응답 (ping 응답)          |
| 목적지 도달 불가 (3)      | 0          | 네트워크 도달 불가                         |
| 목적지 도달 불가 (3)      | 1          | 호스트 도달 불가                           |
| 목적지 도달 불가 (3)      | 3          | 포트 도달 불가                             |
| 시간 초과 (11)            | 0          | TTL 만료 (라우터에서 수명이 0이 됨)        |
| 라우터 광고 (9)           | 0          | 라우터가 자신을 호스트에게 알림           |
| 라우터 요청 (10)          | 0          | 호스트가 근처의 라우터에게 광고를 요청    |

예시 설명:

- **시간 초과(Time Exceeded)**:  
  패킷이 라우터를 거치는 중에 **TTL(Time To Live)** 값이 0이 되면, 해당 라우터는 **타입 11, 코드 0** ICMP 메시지를 송신지에 전송합니다.

- **목적지 도달 불가(Destination Unreachable)**:  
  라우터가 목적지 네트워크나 호스트로 가는 경로를 찾을 수 없을 때 **타입 3, 코드 0 또는 1** ICMP 메시지를 송신지에 보냅니다.

---

## 주의할 점

> **ICMP는 IP의 신뢰성을 보장하지 않습니다.**

- ICMP는 어디까지나 **문제 상황을 알려주는 보조적인 도구**일 뿐입니다.
- ICMP 메시지를 담은 패킷조차 송신지에 도달하지 못할 수 있습니다.
- **신뢰성 보장을 위해서는 전송 계층(TCP 등)의 역할이 필요**합니다.

---

## 정리

| 항목                  | 설명                                                                 |
|-----------------------|----------------------------------------------------------------------|
| 프로토콜 계층         | 네트워크 계층 (IP와 함께 동작)                                        |
| 주요 기능             | 오류 보고, 네트워크 상태 진단 및 정보 제공                           |
| 메시지 구성           | 타입(Type), 코드(Code)                                                |
| 대표 메시지           | 에코 요청/응답, TTL 초과, 목적지 도달 불가, 라우터 광고 등             |
| 신뢰성 보장 여부      | ❌ 신뢰성은 보장하지 않음 (보조적 기능만 수행)                         |
